/******************************************************************************
 * Includes
 *******************************************************************************/
#include "HeatedGrips.h"
#include "IO.h"
#include "MCU_dbc.h"
#include <stdint.h>

/******************************************************************************
 * Constants
 *******************************************************************************/

/******************************************************************************
 * Macros
 *******************************************************************************/

/******************************************************************************
 * Configuration
 *******************************************************************************/

/******************************************************************************
 * Typedefs
 *******************************************************************************/

/******************************************************************************
 * Variable Declarations
 *******************************************************************************/
static uint8_t heatedGripsRun = 0;
/******************************************************************************
 * Function Prototypes
 *******************************************************************************/

/******************************************************************************
 * Function Definitions
 *******************************************************************************/

void HeatedGripControl_Init(void) {
    heatedGripsRun = 1;
    IO_SET_HEATED_GRIPS_EN(LOW);
    IO_SET_HEATED_SEAT_EN(LOW);
}

void HeatedGripControl_Run_100ms(void) {

    if (heatedGripsRun && IO_GET_SW_EN()) {
        if (IO_GET_SPARE_SWITCH_2_IN()) {
            IO_SET_HEATED_GRIPS_EN(HIGH);
            IO_SET_HEATED_SEAT_EN(HIGH);
        }
    } else {
        IO_SET_HEATED_GRIPS_EN(LOW);
        IO_SET_HEATED_SEAT_EN(LOW);
    }

}

void HeatedGripControl_Halt(void) {
    heatedGripsRun = 0;
    IO_SET_HEATED_GRIPS_EN(LOW);
    IO_SET_HEATED_SEAT_EN(LOW);
}

/*** End of File **************************************************************/





